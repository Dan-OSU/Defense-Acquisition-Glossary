<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Searchable Table</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #csv-table_wrapper {
            max-width: 100%;
        }
        table {
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>List of Defense innovation orgs</h1>
    <p>
        You can sort by clicking on the top of any of the columns, and you can filter using the search bar.  Modeled after MetaOSINT's table, but simplified greatly.  Thanks, ChatGPT.  -Dan Rust
    </p>
    <table id="csv-table" class="display nowrap" style="width:100%">
        <thead>
            <tr id="table-header">
                <!-- Headers will be populated dynamically -->
            </tr>
        </thead>
        <tbody id="table-body">
            <!-- Data will be populated dynamically -->
        </tbody>
    </table>

    <p>
        See also: 
        Explore various resources in the innovation ecosystem: 
        <a href="https://www.ctoinnovation.mil/innovation-organizations" target="_blank">Innovation organizations</a>, 
        <a href="https://aida.mitre.org/dod-innovation-ecosystem/" target="_blank">DoD innovation ecosystem</a>, 
        "NatSec.io is an exploratory effort incubated by the Defense Entrepreneurs Forum in 2021 that seeks to increase understanding of the national security innovation ecosystem, improve data literacy, and support learning mindsets with opportunities to experiment.
        Elements:  We think four elements can help interested people on their own journeys discover and help create value in and around the national security innovation ecosystem.
        Data: What powers the project (and an easy way to contribute).
        Graph: How the project data is connected.
        Map: Where to find the project in your neighborhood.
        Timeline: How national security innovation shows evolution over time."
        <a href="https://www.natsec.io/data" target="_blank">Natsec.io Data</a>, 
        <a href="https://www.natsec.io/graph" target="_blank">Natsec.io Graph</a>, 
        <a href="https://www.natsec.io/map" target="_blank">Natsec.io Map</a>, and 
        <a href="https://docs.google.com/spreadsheets/d/1dj9LztlbBCB7BPCNpTHd8ko_Uz1pcLQDjTOfEYJH6Ik/edit?gid=1780929379#gid=1780929379" target="_blank">Natsec.io Google Sheets Resource</a>, and
        <a href="https://www.natsec.io/app" target="_blank">Natsec.io interactive app</a>.
    </p>

    <!-- Add the image -->
    <img id="bottom-right-image" src="images/walter-glasses-300x199.jpg" alt="Scientist with glasses">

    <style>
        #bottom-right-image {
            position: fixed; /* Makes the image stay in place even when scrolling */
            bottom: 20px; /* Distance from the bottom of the viewport */
            right: 20px; /* Distance from the right of the viewport */
            width: 150px; /* Adjust size as needed */
            height: auto; /* Maintain aspect ratio */
            z-index: 1000; /* Ensure it stays on top of other content */
        }
    </style>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const csvFileUrl = "defense-innovation-orgs.csv"; // Replace with the correct file path in your repository

            Papa.parse(csvFileUrl, {
                download: true,
                header: true,
                complete: function (results) {
                    let data = results.data;

                    // Remove rows where all fields are blank
                    data = data.filter(row => {
                        return Object.values(row).some(value => value.trim() !== "");
                    });

                    // Get column headers
                    const columns = Object.keys(data[0]);

                    // Populate table headers
                    const headerRow = document.getElementById("table-header");
                    columns.forEach(col => {
                        const th = document.createElement("th");
                        th.textContent = col;
                        headerRow.appendChild(th);
                    });

                    // Populate table body
                    const tableBody = document.getElementById("table-body");
                    data.forEach(row => {
                        const tr = document.createElement("tr");
                        columns.forEach(col => {
                            const td = document.createElement("td");
                            td.textContent = row[col];
                            tr.appendChild(td);
                        });
                        tableBody.appendChild(tr);
                    });

                    // Initialize DataTable with sorting and scrolling
                    $('#csv-table').DataTable({
                        scrollY: "700px", // Increase the height to make more content visible
                        scrollCollapse: true,
                        paging: false,
                        order: [[columns.indexOf("Name"), "asc"]], // Sort by the "Name" column, A-Z
                    });
                }
            });
        });
    </script>
</body>
</html>
