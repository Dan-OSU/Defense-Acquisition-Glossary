<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defense Innovation Organizations</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding-bottom: 100px;
        }

        #csv-table_wrapper {
            max-width: 100%;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }

        th {
            position: relative;
            background-color: #f4f4f4;
            padding: 8px;
            border: 1px solid #ddd;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
            cursor: pointer;
            min-width: 100px;
        }

        th .content {
            padding-right: 10px;
            word-wrap: break-word;
        }

        td {
            padding: 8px;
            border: 1px solid #ddd;
            word-wrap: break-word;
            vertical-align: top;
        }

        .resize-handle {
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            cursor: col-resize;
            background-color: #ddd;
            opacity: 0;
            transition: opacity 0.2s;
        }

        th:hover .resize-handle {
            opacity: 1;
        }

        /* GitHub Corner Styles */
        .github-corner {
            position: absolute;
            top: 0;
            right: 0;
            border: 0;
        }

        .github-corner svg {
            fill: #151513;
            color: #fff;
            position: absolute;
            top: 0;
            right: 0;
            border: 0;
            clip-path: polygon(0 0, 100% 0, 100% 100%);
        }

        .github-corner:hover .octo-arm {
            animation: octocat-wave 560ms ease-in-out;
        }

        @keyframes octocat-wave {
            0%, 100% { transform: rotate(0); }
            20%, 60% { transform: rotate(-25deg); }
            40%, 80% { transform: rotate(10deg); }
        }

        @media (max-width: 500px) {
            .github-corner:hover .octo-arm {
                animation: none;
            }
            .github-corner .octo-arm {
                animation: octocat-wave 560ms ease-in-out;
            }
        }

        #bottom-right-image {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 150px;
            height: auto;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <h1>List of Defense Innovation Organizations</h1>
    <p>
        You can sort by clicking on the top of any of the columns, filter using the search bar, and resize columns by dragging the column edges.<br>
        Modeled after MetaOSINT's table, but simplified greatly. Thanks, ChatGPT.<br>
        -Dan Rust
    </p>
    <table id="csv-table" class="display nowrap" style="width:100%">
        <thead>
            <tr id="table-header"></tr>
        </thead>
        <tbody id="table-body"></tbody>
    </table>

<p>
    See also:<br>
    Explore various resources in the innovation ecosystem:<br>
    <a href="https://www.ctoinnovation.mil/innovation-organizations" target="_blank">Innovation organizations</a><br>
    <a href="https://aida.mitre.org/dod-innovation-ecosystem/" target="_blank">DoD innovation ecosystem</a><br>
    "NatSec.io is an exploratory effort incubated by the Defense Entrepreneurs Forum in 2021 that seeks to increase understanding of the national security innovation ecosystem, improve data literacy, and support learning mindsets with opportunities to experiment."
    <br>
    "Elements: We think four elements can help interested people on their own journeys discover and help create value in and around the national security innovation ecosystem." <br>
    <strong>Data:</strong> "What powers the project (and an easy way to contribute)." <br>
    <strong>Graph:</strong> "How the project data is connected." <br>
    <strong>Map:</strong> "Where to find the project in your neighborhood." <br>
    <strong>Timeline:</strong> "How national security innovation shows evolution over time." <br>
    Resources: <br>
    <a href="https://www.natsec.io/app" target="_blank">NatSec.io Interactive App</a><br>
    <a href="https://www.natsec.io/data" target="_blank">NatSec.io Data</a><br>
    <a href="https://www.natsec.io/graph" target="_blank">NatSec.io Graph</a><br>
    <a href="https://www.natsec.io/map" target="_blank">NatSec.io Map</a><br>
    <a href="https://docs.google.com/spreadsheets/d/1dj9LztlbBCB7BPCNpTHd8ko_Uz1pcLQDjTOfEYJH6Ik/edit?gid=1780929379#gid=1780929379" target="_blank">NatSec.io Google Sheets Resource</a><br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
</p>

    <img id="bottom-right-image" src="images/walter-glasses-300x199.jpg" alt="Scientist with glasses">

    <a href="https://github.com/trustdan/Defense-Innovation-Table" class="github-corner" aria-label="View source on GitHub">
        <svg width="80" height="80" viewBox="0 0 250 250">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm"></path>
            <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
    </a>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const csvFileUrl = "defense-innovation-orgs.csv";

            Papa.parse(csvFileUrl, {
                download: true,
                header: true,
                complete: function (results) {
                    let data = results.data.filter(row => 
                        Object.values(row).some(value => value.trim() !== "")
                    );

                    const columns = Object.keys(data[0]);
                    
                    // Initialize headers with resize handles
                    const headerRow = document.getElementById("table-header");
                    columns.forEach(col => {
                        const th = document.createElement("th");
                        // Create content container
                        const content = document.createElement("div");
                        content.className = "content";
                        content.textContent = col;
                        th.appendChild(content);
                        
                        // Create resize handle
                        const handle = document.createElement("div");
                        handle.className = "resize-handle";
                        th.appendChild(handle);
                        headerRow.appendChild(th);
                    });

                    // Populate table body
                    const tableBody = document.getElementById("table-body");
                    data.forEach(row => {
                        const tr = document.createElement("tr");
                        columns.forEach(col => {
                            const td = document.createElement("td");
                            td.textContent = row[col];
                            tr.appendChild(td);
                        });
                        tableBody.appendChild(tr);
                    });

                    // Initialize DataTable
                    const table = $('#csv-table').DataTable({
                        scrollY: "500px",
                        scrollCollapse: true,
                        paging: false,
                        order: [[columns.indexOf("Name"), "asc"]]
                    });

                    // Column resize functionality
                    const thElems = document.querySelectorAll('th');
                    thElems.forEach(th => {
                        const resizeHandle = th.querySelector('.resize-handle');
                        let startX, startWidth;

                        resizeHandle.addEventListener('mousedown', function(e) {
                            startX = e.pageX;
                            startWidth = th.offsetWidth;
                            
                            document.addEventListener('mousemove', resize);
                            document.addEventListener('mouseup', stopResize);
                            
                            // Prevent sorting when resizing
                            e.stopPropagation();
                            e.preventDefault();
                        });

                        function resize(e) {
                            const width = Math.max(100, startWidth + (e.pageX - startX));
                            th.style.width = `${width}px`;
                            
                            // Force DataTables to recalculate column widths
                            table.columns.adjust();
                        }

                        function stopResize() {
                            document.removeEventListener('mousemove', resize);
                            document.removeEventListener('mouseup', stopResize);
                        }

                        // Handle click events separately from resize events
                        th.addEventListener('click', function(e) {
                            // Only trigger sort if we're not resizing
                            if (!e.target.classList.contains('resize-handle')) {
                                const index = Array.from(th.parentElement.children).indexOf(th);
                                table.column(index).order('asc').draw();
                            }
                        });
                    });
                }
            });
        });
    </script>
</body>
</html>
